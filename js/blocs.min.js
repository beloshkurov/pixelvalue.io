function setFillScreenBlocHeight() {
    $(".bloc-fill-screen").each(function(a) {
        var b = $(this);
        window.fillBodyHeight = 0,
        $(this).find(".container").each(function(a) {
            fillPadding = 2 * parseInt($(this).css("padding-top")),
            b.hasClass("bloc-group") ? fillBodyHeight = fillPadding + $(this).outerHeight() + 50 : fillBodyHeight = fillBodyHeight + fillPadding + $(this).outerHeight() + 50
        }),
        $(this).css("height", getFillHeight() + "px")
    })
}

function getFillHeight() {
    var a = $(window).height();
    return a < fillBodyHeight && (a = fillBodyHeight + 100),
    a
}

function scrollToTargetX(offset, shift, delay, cb) {
  $("html,body").animate({
      scrollTop: offset + shift | 0
  }, delay || "slow", cb);
  $(".navbar-collapse").collapse("hide");
}

function scrollToTarget(a, shift, delay, cb) {
  var offset = 0
  if (typeof a === 'top') {
    if (a === -1) {
      offset = $(document).height()
    } else {
      offset = $(a).offset().top
      $(".sticky-nav").length && (offset -= $(".sticky-nav").height())
    }
  }
  scrollToTargetX(offset, shift, delay, cb)
}

function animateWhenVisible() {
    hideAll(),
    inViewCheck(),
    $(window).scroll(function() {
        inViewCheck(),
        scrollToTopButtonView(),
        stickyNavToggle()
    })
}
function setUpDropdownSubs() {
    $("ul.dropdown-menu [data-toggle=dropdown]").on("click", function(a) {
        a.preventDefault(),
        a.stopPropagation(),
        $(this).parent().siblings().removeClass("open"),
        $(this).parent().toggleClass("open");
        var b = $(this).parent().children(".dropdown-menu")
          , c = b.offset().left + b.width();
        c > $(window).width() && b.addClass("dropmenu-flow-right")
    })
}
function stickyNavToggle() {
    var a = 0
      , b = "sticky";
    if ($(".sticky-nav").hasClass("fill-bloc-top-edge")) {
        //var c = '#000';
        //$(".sticky-nav").css("background", c),
        a = $(".sticky-nav").height(),
        b = "sticky animated fadeInDown"
    }

    if ($(window).scrollTop() > a) {
      $(".sticky-nav").addClass(b);
      if ("sticky" == b)
        $(".page-container").css("padding-top", $(".sticky-nav").height());

    } else {
      $(".sticky-nav").removeClass(b);//.removeAttr("style");
      $(".page-container").removeAttr("style")
    }
}

function hideAll() {
    $(".animated").each(function(a) {
        $(this).closest(".hero").length || $(this).removeClass("animated").addClass("hideMe")
    })
}
function inViewCheck() {
    $($(".hideMe").get().reverse()).each(function(a) {
        var b = jQuery(this)
          , c = b.offset().top + b.height()
          , d = $(window).scrollTop() + $(window).height();
        if (b.height() > $(window).height() && (c = b.offset().top),
        c < d) {
            var e = b.attr("class").replace("hideMe", "animated");
            b.css("visibility", "hidden").removeAttr("class"),
            setTimeout(function() {
                b.attr("class", e).css("visibility", "visible")
            }, .01)
        }
    })
}
function scrollToTopButtonView() {
    $(window).scrollTop() > $(window).height() / 3
      ? $(".scrollToTop").hasClass("showScrollTop") || $(".scrollToTop").addClass("showScrollTop")
      : $(".scrollToTop").removeClass("showScrollTop")
}


function Lightbox() {
  Lightbox.instance = $(Lightbox.create('', data)).appendTo('body')
}


Lightbox.instance = null;
Lightbox.create = function (modalContent, modalBody) {
  return $('<div id="lightbox-modal" class="modal fade"><div class="modal-dialog">' +
            '<div class="modal-content ' + modalContent + '">' +
              '<button type="button" class="close close-lightbox" data-dismiss="modal" aria-label="Close">' +
                '<span aria-hidden="true">&times;</span>' +
              '</button>' +
              '<div class="modal-body">' +
                modalBody +
              '</div>' +
            '</div>' +
          '</div>');
}

function setUpLightBox() {
    window.targetLightbox,
    $(document).on("click", "[data-lightbox]", function(a) {
        a.preventDefault(),
        targetLightbox = $(this);
        var b = targetLightbox.attr("data-lightbox")
          , c = targetLightbox.attr("data-autoplay")
          , d = '<p class="lightbox-caption">' + targetLightbox.attr("data-caption") + "</p>"
          , e = "no-gallery-set";
        targetLightbox.attr("data-gallery-id") && (e = targetLightbox.attr("data-gallery-id")),
        targetLightbox.attr("data-caption") || (d = "");
        var f = "";
        1 == c && (f = "autoplay");
        var g = Lightbox.create(targetLightbox.attr("data-frame"),
                '<a href="#" class="prev-lightbox" aria-label="prev"></a>' +
                '<a href="#" class="next-lightbox" aria-label="next"></a>' +
                '<img id="lightbox-image" class="img-responsive" src="' + b + '">' +
                '<div id="lightbox-video-container" class="embed-responsive embed-responsive-16by9">' +
                  '<video controls ' + f + ' class="embed-responsive-item">' +
                    '<source id="lightbox-video" src="' + b + '" type="video/mp4">' +
                  '</video>' +
                '</div>' +
                '<p class="lightbox-caption">' + targetLightbox.attr("data-caption") + '</p>');

        //var g = $('<div id="lightbox-modal" class="modal fade"><div class="modal-dialog"><div class="modal-content ' + targetLightbox.attr("data-frame") + '"><button type="button" class="close close-lightbox" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><a href="#" class="prev-lightbox" aria-label="prev"></a><a href="#" class="next-lightbox" aria-label="next"></a><img id="lightbox-image" class="img-responsive" src="' + b + '"><div id="lightbox-video-container" class="embed-responsive embed-responsive-16by9"><video controls ' + f + ' class="embed-responsive-item"><source id="lightbox-video" src="' + b + '" type="video/mp4"></video></div>' + d + "</div></div></div></div>");
        $("body").append(g),
        ".mp4" == b.substring(b.length - 4) ? ($("#lightbox-image, .lightbox-caption").hide(),
        $("#lightbox-video-container").show()) : ($("#lightbox-image,.lightbox-caption").show(),
        $("#lightbox-video-container").hide()),
        $("#lightbox-modal").modal("show"),
        "no-gallery-set" == e ? (0 == $("a[data-lightbox]").index(targetLightbox) && $(".prev-lightbox").hide(),
        $("a[data-lightbox]").index(targetLightbox) == $("a[data-lightbox]").length - 1 && $(".next-lightbox").hide()) : (0 == $('a[data-gallery-id="' + e + '"]').index(targetLightbox) && $(".prev-lightbox").hide(),
        $('a[data-gallery-id="' + e + '"]').index(targetLightbox) == $('a[data-gallery-id="' + e + '"]').length - 1 && $(".next-lightbox").hide())
    }).on("hidden.bs.modal", "#lightbox-modal", function() {
        $("#lightbox-modal").remove()
    }),
    $(document).on("click", ".next-lightbox, .prev-lightbox", function(a) {
        a.preventDefault();
        var b = "no-gallery-set"
          , c = $("a[data-lightbox]").index(targetLightbox)
          , d = $("a[data-lightbox]").eq(c + 1);
        targetLightbox.attr("data-gallery-id") && (b = targetLightbox.attr("data-gallery-id"),
        c = $('a[data-gallery-id="' + b + '"]').index(targetLightbox),
        d = $('a[data-gallery-id="' + b + '"]').eq(c + 1)),
        $(this).hasClass("prev-lightbox") && (d = $('a[data-gallery-id="' + b + '"]').eq(c - 1),
        "no-gallery-set" == b && (d = $("a[data-lightbox]").eq(c - 1)));
        var e = d.attr("data-lightbox");
        if (".mp4" == e.substring(e.length - 4)) {
            var f = d.attr("data-autoplay")
              , g = "";
            1 == f && (g = "autoplay"),
            $("#lightbox-image, .lightbox-caption").hide(),
            $("#lightbox-video-container").show().html("<video controls " + g + ' class="embed-responsive-item"><source id="lightbox-video" src="' + e + '" type="video/mp4"></video>')
        } else
            $("#lightbox-image").attr("src", e).show(),
            $(".lightbox-caption").html(d.attr("data-caption")).show(),
            $("#lightbox-video-container").hide();
        targetLightbox = d,
        $(".next-lightbox, .prev-lightbox").hide(),
        "no-gallery-set" == b ? ($("a[data-lightbox]").index(d) != $("a[data-lightbox]").length - 1 && $(".next-lightbox").show(),
        $("a[data-lightbox]").index(d) > 0 && $(".prev-lightbox").show()) : ($('a[data-gallery-id="' + b + '"]').index(d) != $('a[data-gallery-id="' + b + '"]').length - 1 && $(".next-lightbox").show(),
        $('a[data-gallery-id="' + b + '"]').index(d) > 0 && $(".prev-lightbox").show())
    })
}



$(document).ready(function() {
    //$("body").append('<div id="page-loading-blocs-notifaction"></div>'),
    $(".bloc-fill-screen").css("height", $(window).height() + "px"),
    $("#scroll-hero").click(function(a) {
        a.preventDefault(),
        $("html,body").animate({
            scrollTop: $("#scroll-hero").closest(".bloc").height()
        }, "slow")
    }),
    setUpDropdownSubs(),
    setUpLightBox();

    $('.scroll-action').click(function (e) {
      e.preventDefault();
      var href = $.attr(this, 'href');
      var target =  $.data(this, 'scroll-target');
      var shiftTop = $.data(this, 'scroll-shift') | 0;

      var cb = function (hash, shift) {
        if (shift && window.hasOwnProperty('history')) {
          history.pushState({ shift: shift }, '', hash)
        } else {
          window.location.hash = hash
        }
      }

      if (href && !target) {
        if (href.length === 1) {
          var hash = '';
          target = 0;
        }
      } else if (target) {
        target = $(target);
        hash = e.target.href || $(e.target).data('hash');

      }
      scrollToTarget(target, shiftTop, void 0, cb)
    })
}),
$(window).load(function() {
    setFillScreenBlocHeight(),
    animateWhenVisible()
    //$("#page-loading-blocs-notifaction").remove()

    stickyNavToggle();

    var menu = $("#main-menu");
     menu.on("click", "a", null, function () {
         manu.collapse('hide');
     });
}).resize(function() {
    setFillScreenBlocHeight()
}),
$(function() {
    $('[data-toggle="tooltip"]').tooltip()
});
